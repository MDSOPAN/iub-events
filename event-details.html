<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details</title>
    <!-- Add your CSS file here -->
</head>
<body>
    <div id="eventDetails" class="event-details-container">
        <h1 id="eventTitle"></h1>
        <p id="eventDate"></p>
        <p id="eventTime"></p>
        <p id="eventLocation"></p>
        <p id="eventDescription"></p>
        <p id="eventCategory"></p>
        <p id="eventClub"></p>
        <p id="eventDepartment"></p>
    </div>

    <script>
        // Get the event name from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const eventName = urlParams.get('event');

        // Fetch event data again and display the selected event details
        fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSRwJWqPH7hK43GO-t6ZFizR_pAm0A1DfmvROtjnoN16ZwMWdTYYJM6eqHbK1w1Gw12UV-KzKQfP0jG/pub?output=csv')
            .then(response => response.text())
            .then(data => {
                const events = parseCSV(data);
                const event = events.find(e => e.eventName === eventName); // Find the event by name
                if (event) {
                    // Fill in the event details on the page
                    document.getElementById('eventTitle').innerText = event.eventName;
                    document.getElementById('eventDate').innerText = `Date: ${event.eventDate}`;
                    document.getElementById('eventTime').innerText = `Time: ${event.eventTime}`;
                    document.getElementById('eventLocation').innerText = `Location: ${event.location}`;
                    document.getElementById('eventDescription').innerText = `Description: ${event.description}`;
                    document.getElementById('eventCategory').innerText = `Category: ${event.category}`;
                    document.getElementById('eventClub').innerText = `Club: ${event.club}`;
                    document.getElementById('eventDepartment').innerText = `Department: ${event.department}`;
                } else {
                    document.getElementById('eventDetails').innerHTML = "<p>Event not found.</p>";
                }
            })
            .catch(error => console.error('Error fetching event data:', error));

        // Parse CSV data function
        function parseCSV(data) {
            const rows = data.split('\n');
            return rows.slice(1).map(row => {
                const cols = row.split(',');
                return {
                    eventName: cols[3],
                    eventDate: cols[4],
                    eventTime: `${cols[6]} - ${cols[7]}`,
                    location: cols[8],
                    description: cols[10],
                    link: cols[11],
                    category: cols[12],
                    club: cols[2],
                    department: cols[1]
                };
            });
        }
    </script>
</body>
</html>
